# Apache Virtual Host Configuration for Trader Analyzer
# Этот файл нужно поместить в Apache конфигурацию (например, в sites-available)

<VirtualHost *:80>
    ServerName projects.test
    DocumentRoot "C:/projects"
    
    # Alias for trader-analyzer
    Alias /trader-analyzer/public "C:/projects/trader-analyzer/public"
    
    # Основная директория приложения
    <Directory "C:/projects/trader-analyzer/public">
        AllowOverride All
        Require all granted
        
        # Laravel .htaccess будет обрабатывать маршрутизацию
        DirectoryIndex index.php
        
        # Обрабатываем все запросы через index.php для SPA маршрутов
        FallbackResource /trader-analyzer/public/index.php
    </Directory>
    
    # Логи для отладки
    ErrorLog "logs/trader-analyzer-error.log"
    CustomLog "logs/trader-analyzer-access.log" common
    
    # Для development среды
    SetEnv APP_ENV local
    SetEnv APP_DEBUG true
</VirtualHost>

# ВАЖНО: После создания этой конфигурации:
# 1. Поместить файл в Apache sites-available
# 2. Включить сайт: a2ensite trader-analyzer
# 3. Перезагрузить Apache: systemctl reload apache2
# 4. Убедиться что projects.test указывает на локальный сервер в /etc/hosts

# Для Windows (XAMPP/WAMP):
# 1. Добавить эту конфигурацию в httpd-vhosts.conf (заменить старую)
# 2. Добавить в C:\Windows\System32\drivers\etc\hosts:
#    127.0.0.1 projects.test
# 3. Перезапустить Apache службу
# 4. После перезапуска Apache, переходы на /trades/1, /trades/2 etc. должны работать

# ИСПРАВЛЕНО: добавлен Alias и FallbackResource для правильной обработки SPA маршрутов